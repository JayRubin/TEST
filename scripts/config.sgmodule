#!name=Custom Config
#!desc=Script for Surge iOS [ update time: 2022-12-15 22:30:00 ]

[Rule]
# Unbreak
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Unbreak.list,DIRECT
# Download
PROCESS-NAME,aria2c,DIRECT
PROCESS-NAME,fdm,DIRECT
PROCESS-NAME,Folx,DIRECT
PROCESS-NAME,NetTransport,DIRECT
PROCESS-NAME,Thunder,DIRECT
PROCESS-NAME,Transmission,DIRECT
PROCESS-NAME,uTorrent,DIRECT
PROCESS-NAME,UUBooster,DIRECT
PROCESS-NAME,WebTorrent,DIRECT
PROCESS-NAME,WebTorrent Helper,DIRECT
# Unreachable
DOMAIN-SUFFIX,google.com,failback
DOMAIN-SUFFIX,gitlab.com,Proxy
DOMAIN-SUFFIX,github.com,Proxy
DOMAIN-SUFFIX,raw.githubusercontent.com,Proxy
DOMAIN-SUFFIX,cdn.jsdelivr.net,Proxy
DOMAIN-SUFFIX,pypi.org,Proxy
DOMAIN-SUFFIX,adguard.com,Proxy
DOMAIN-SUFFIX,adtidy.org,Proxy
# Proxy
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Streaming.list,Proxy
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Global.list,Proxy
# DIRECT
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Apple/Apple.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/China.list,DIRECT
# End
RULE-SET,SYSTEM,DIRECT
RULE-SET,LAN,DIRECT
GEOIP,CN,DIRECT

[URL Rewrite]
# Redirect Google Search Service
^https?:\/\/(www.)?(g|google)\.cn https://www.google.com 302
# Redirect Google Maps Service
^https?:\/\/(ditu|maps).google\.cn https://maps.google.com 302
# Redirect HTTP to HTTPS
^https?:\/\/(www.)?taobao\.com\/ https://taobao.com/ 302
^https?:\/\/(www.)?jd\.com\/ https://www.jd.com/ 302
^https?:\/\/(www.)?mi\.com\/ https://www.mi.com/ 302

[Host]
# > Global
google.com = server:8.8.8.8
*google.com = server:8.8.8.8
adguard.com = server:8.8.8.8
*adguard.com = server:8.8.8.8
gitlab.com = server:8.8.8.8
*gitlab.com = server:8.8.8.8
github.com = server:8.8.8.8
*github.com = server:8.8.8.8
githubusercontent.com = server:8.8.8.8
*.githubusercontent.com = server:8.8.8.8
# > China
taobao.com = server:223.5.5.5
*.taobao.com = server:223.5.5.5
tmall.com = server:223.5.5.5
*.tmall.com = server:223.5.5.5
jd.com = server:119.29.29.29
*.jd.com = server:119.29.29.29
*.qq.com = server:119.29.29.29
*.tencent.com = server:119.29.29.29
*.alicdn.com = server:223.5.5.5
aliyun.com = server:223.5.5.5
*.aliyun.com = server:223.5.5.5
weixin.com = server:119.29.29.29
*.weixin.com = server:119.29.29.29
bilibili.com = server:119.29.29.29
*.bilibili.com = server:119.29.29.29
*.hdslb.com = server:119.29.29.29
163.com = server:119.29.29.29
*.163.com = server:119.29.29.29
126.com = server:119.29.29.29
*.126.com = server:119.29.29.29
*.126.net = server:119.29.29.29
*.127.net = server:119.29.29.29
*.netease.com = server:119.29.29.29
mi.com = server:119.29.29.29
*.mi.com = server:119.29.29.29
xiaomi.com = server:119.29.29.29
*.xiaomi.com = server:119.29.29.29
# > Apple
aaplimg.com = server:119.29.29.29
apple.com = server:119.29.29.29
apple.com.cn = server:119.29.29.29
apple-cloudkit.com = server:119.29.29.29
apple-livephotoskit.com = server:119.29.29.29
apple-mapkit.com = server:119.29.29.29
cdn-apple.com = server:119.29.29.29
icloud.com = server:119.29.29.29
icloud.com.cn = server:119.29.29.29
mzstatic.com = server:119.29.29.29
*.aaplimg.com = server:119.29.29.29
*.apple.com = server:119.29.29.29
*.apple-cloudkit.com = server:119.29.29.29
*.apple-livephotoskit.com = server:119.29.29.29
*.apple-mapkit.com = server:119.29.29.29
*.cdn-apple.com = server:119.29.29.29
*.icloud.com = server:119.29.29.29
*.icloud.com.cn = server:119.29.29.29
*.mzstatic.com = server:119.29.29.29
*apple.com.akadns.net = server:119.29.29.29
*.apple.com.edgekey.net = server:119.29.29.29
*.apple.com.edgekey.net.globalredir.akadns.net = server:119.29.29.29
*icloud.com.akadns.net = server:119.29.29.29

[MITM]
hostname = %APPEND% www.google.cn, www.g.cn
